<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<meta name="description" content="{MetaDescription}">
		<title>{Title}</title>
		<link rel="shortcut icon" href="{Favicon}">
		<link rel="alternate" type="application/rss+xml" href="{RSS}">
		<style type="text/css" charset="utf-8">{CustomCSS}</style>
	</head>
	<body>
		<h1>Loading...</h1>
	</body>

	<script src="/application.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">
		var jQuery  = require("jqueryify");
		var exports = this;
		jQuery(function(){
			var Blog = require("models/blog");
			Blog.create({
				title: "{Title}",
				description: "{Description}",
				portrait: "{PortraitURL-128}",
				years: "{CopyrightYears}",
				rss: "{RSS}"
			});

			var Post = require("models/post");
			var Tag = require("models/tag");
			var Date = require("models/date");
			var Text = require("models/text");
			var Photo = require("models/photo");

			Tag.create({
				id: "Tags",
				url: "#"
			});

			// {block:Posts}
			Post.create({

				// {block:HasTags}
				tags: [
					// {block:Tags}
					Tag.create({
						id: "{Tag}",
						url: "{TagURLChrono}"
					}),
					// {/block:Tags}
					Tag.find('Tags')
				],
				// {/block:HasTags}

				// {block:Date}
				date: Date.create({
					year: "{Year}",
					month: "{ShortMonth}",
					day: "{DayOfMonthWithZero}"
				}),
				// {/block:Date}

				// {block:Text}
				text: Text.create({
					title: "{Title}",
					body: "{Body}"
				}),
				// {/block:Text}

				// {block:Photo}
				photo: Photo.create({
					url: "{PhotoURL-500}",
					link: "{LinkURL}",
					caption: "{Caption}"
				}),
				// {/block:Photo}

				type: "{PostType}",
				url: "{Permalink}",
				id: "{PostID}"
			});
			// {/block:Posts}

			var App = require("index");
			exports.app = new App({el: $("body")});
			app.render();
		});
	</script>

</html>
